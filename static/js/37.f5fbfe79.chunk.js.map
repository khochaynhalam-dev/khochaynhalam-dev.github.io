{"version":3,"sources":["pages/instagram/detail/index.js"],"names":["Detail","instagramId","useParams","id","dispatch","useDispatch","store","useSelector","state","instagram","useState","isLoading","setLoading","a","socialStory","avatar_file","formData","FormData","append","uploadImage","image","data","avatar_url","url","avatar_url_thumb","thumb_url","image_file","image_url","image_url_thumb","video_file","uploadVideo","video","video_url","updateSocialStory","res","status","history","go","useEffect","getSocialStory","undefined","className","type_values","handleSubmitButton"],"mappings":"yQAmGeA,UAvFA,WAEb,IAAMC,EAAcC,cAAYC,GAE1BC,EAAWC,cACXC,EAAQC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,aACvC,EAAgCC,oBAAS,GAAzC,mBAAOC,EAAP,KAAkBC,EAAlB,KANiB,4CAcjB,wEAAAC,EAAA,0DACQF,EADR,oDAIIC,GAAW,KACLE,EALV,OAKwBR,QALxB,IAKwBA,OALxB,EAKwBA,EAAOQ,aACXC,YANpB,wBAOcC,EAAW,IAAIC,UACZC,OAAT,QAAyBJ,EAAYC,aAR7C,SAS4BI,YAAYH,GATxC,QAUQ,QADMI,EATd,cAUQ,IAAIA,GAAJ,UAAIA,EAAOC,YAAX,aAAI,EAAaA,QACbP,EAAYQ,WAAZ,OAAyBF,QAAzB,IAAyBA,GAAzB,UAAyBA,EAAOC,YAAhC,iBAAyB,EAAaA,YAAtC,aAAyB,EAAmBE,IAC5CT,EAAYU,iBAAZ,OAA+BJ,QAA/B,IAA+BA,GAA/B,UAA+BA,EAAOC,YAAtC,iBAA+B,EAAaA,YAA5C,aAA+B,EAAmBI,UAClDX,EAAYC,YAAc,MAbtC,YAgBQD,EAAYY,WAhBpB,wBAiBcV,EAAW,IAAIC,UACZC,OAAT,QAAyBJ,EAAYY,YAlB7C,UAmB4BP,YAAYH,GAnBxC,SAoBQ,QADMI,EAnBd,cAoBQ,IAAIA,GAAJ,UAAIA,EAAOC,YAAX,aAAI,EAAaA,QACbP,EAAYa,UAAZ,OAAwBP,QAAxB,IAAwBA,GAAxB,UAAwBA,EAAOC,YAA/B,iBAAwB,EAAaA,YAArC,aAAwB,EAAmBE,IAC3CT,EAAYc,gBAAZ,OAA8BR,QAA9B,IAA8BA,GAA9B,UAA8BA,EAAOC,YAArC,iBAA8B,EAAaA,YAA3C,aAA8B,EAAmBI,UACjDX,EAAYY,WAAa,MAvBrC,YA2BQZ,EAAYe,WA3BpB,wBA4Bcb,EAAW,IAAIC,UACZC,OAAT,QAAyBJ,EAAYe,YA7B7C,UA8B4BC,YAAYd,GA9BxC,SA+BQ,QADMe,EA9Bd,cA+BQ,IAAIA,GAAJ,UAAIA,EAAOV,YAAX,aAAI,EAAaA,QACbP,EAAYkB,UAAZ,OAAwBD,QAAxB,IAAwBA,GAAxB,UAAwBA,EAAOV,YAA/B,iBAAwB,EAAaA,YAArC,aAAwB,EAAmBE,IAC3CT,EAAYe,WAAa,MAjCrC,yBAoCsBI,YAAkBnB,EAAD,OAAcA,QAAd,IAAcA,OAAd,EAAcA,EAAaX,IApClE,QAoCU+B,EApCV,OAqCItB,GAAW,IACX,OAAIsB,QAAJ,IAAIA,GAAJ,UAAIA,EAAKb,YAAT,aAAI,EAAWc,UACX7B,EAAMQ,YAAc,KACb,QAAP,EAAAsB,eAAA,SAASC,IAAI,IAxCrB,6CAdiB,sBA4DnB,OApDEC,qBAAU,YACDrC,EAAc,GACfG,EAASmC,YAAetC,MAE7B,CAACG,IAgDwB,OAAtBE,EAAMQ,kBAA8C0B,IAAtBlC,EAAMQ,aACrCR,EAAMQ,YAAYX,MAAQF,EAC/B,eAAC,WAAD,WAEQU,GACA,sBAAK8B,UAAU,UAAf,UACI,qBAAKA,UAAU,qBACf,qBAAKA,UAAU,qBACf,qBAAKA,UAAU,wBAGzB,sBAAKA,UAAU,wBAAf,UACI,cAAC,IAAD,CACIrC,SAAUA,EACVU,YAAW,OAAER,QAAF,IAAEA,OAAF,EAAEA,EAAOQ,YACpB4B,YAAW,OAAEpC,QAAF,IAAEA,OAAF,EAAEA,EAAOoC,cAExB,cAAC,IAAD,CACIC,mBA9EO,2CA+EP7B,YAAW,OAAER,QAAF,IAAEA,OAAF,EAAEA,EAAOQ,YACpBV,SAAUA,UAIf","file":"static/js/37.f5fbfe79.chunk.js","sourcesContent":["// ** React Imports\r\nimport {useEffect, Fragment, useState} from 'react'\r\nimport {useParams} from 'react-router-dom'\r\n\r\n// ** Store & Actions\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport '@styles/base/pages/app-ecommerce-details.scss'\r\nimport CommonFooter from \"../../../components/CommonFooter\"\r\nimport {getSocialStory, updateSocialStory, uploadImage} from \"../store/action\"\r\nimport Instagram from \"../layout/InstagramDetail\"\r\nimport {uploadVideo} from \"../../product/store/action\"\r\nconst Detail = () => {\r\n  // ** Vars\r\n  const instagramId = useParams().id\r\n  // ** Store Vars\r\n  const dispatch = useDispatch()\r\n  const store = useSelector(state => state.instagram)\r\n    const [isLoading, setLoading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (+instagramId > 0) {\r\n            dispatch(getSocialStory(instagramId))\r\n        }\r\n    }, [dispatch])\r\n\r\n    async function handleSubmitButton() {\r\n        if (isLoading) {\r\n            return\r\n        }\r\n        setLoading(true)\r\n        const socialStory = store?.socialStory\r\n        if (socialStory.avatar_file) {\r\n            const formData = new FormData()\r\n            formData.append(`image`, socialStory.avatar_file)\r\n            const image = await uploadImage(formData)\r\n            if (image?.data?.data) {\r\n                socialStory.avatar_url = image?.data?.data?.url\r\n                socialStory.avatar_url_thumb = image?.data?.data?.thumb_url\r\n                socialStory.avatar_file = null\r\n            }\r\n        }\r\n        if (socialStory.image_file) {\r\n            const formData = new FormData()\r\n            formData.append(`image`, socialStory.image_file)\r\n            const image = await uploadImage(formData)\r\n            if (image?.data?.data) {\r\n                socialStory.image_url = image?.data?.data?.url\r\n                socialStory.image_url_thumb = image?.data?.data?.thumb_url\r\n                socialStory.image_file = null\r\n            }\r\n        }\r\n\r\n        if (socialStory.video_file) {\r\n            const formData = new FormData()\r\n            formData.append(`video`, socialStory.video_file)\r\n            const video = await uploadVideo(formData)\r\n            if (video?.data?.data) {\r\n                socialStory.video_url = video?.data?.data?.url\r\n                socialStory.video_file = null\r\n            }\r\n        }\r\n        const res = await updateSocialStory(socialStory, socialStory?.id)\r\n        setLoading(false)\r\n        if (res?.data?.status) {\r\n            store.socialStory = null\r\n            history?.go(-1)\r\n        } else {\r\n            //show error message\r\n        }\r\n    }\r\n  // ** ComponentDidMount : Get product\r\n  return (store.socialStory !== null && store.socialStory !== undefined\r\n      && store.socialStory.id === +instagramId) ? (\r\n    <Fragment>\r\n        {\r\n            isLoading &&\r\n            <div className='loading'>\r\n                <div className='effect-1 effects'/>\r\n                <div className='effect-2 effects'/>\r\n                <div className='effect-3 effects'/>\r\n            </div>\r\n        }\r\n      <div className='app-ecommerce-details'>\r\n          <Instagram\r\n              dispatch={dispatch}\r\n              socialStory={store?.socialStory}\r\n              type_values={store?.type_values}\r\n          />\r\n          <CommonFooter\r\n              handleSubmitButton={handleSubmitButton}\r\n              socialStory={store?.socialStory}\r\n              dispatch={dispatch}\r\n          />\r\n      </div>\r\n    </Fragment>\r\n    ) : (<div></div>)\r\n}\r\n\r\nexport default Detail\r\n"],"sourceRoot":""}