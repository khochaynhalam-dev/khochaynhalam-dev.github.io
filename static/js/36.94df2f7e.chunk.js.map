{"version":3,"sources":["pages/instagram/create/index.js"],"names":["Create","dispatch","useDispatch","store","useSelector","state","instagram","useState","isLoading","setLoading","a","socialStory","newSocialStory","avatar_file","formData","FormData","append","uploadImage","image","data","avatar_url","url","avatar_url_thumb","thumb_url","image_file","image_url","image_url_thumb","video_file","uploadVideo","video","video_url","createSocialStory","res","status","history","go","useEffect","className","handleSubmitButton"],"mappings":"gQAyFeA,UA/EA,WAGb,IAAMC,EAAWC,cACXC,EAAQC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,aACzC,EAAgCC,oBAAS,GAAzC,mBAAOC,EAAP,KAAkBC,EAAlB,KALmB,4CAQjB,wEAAAC,EAAA,0DACQF,EADR,oDAIIC,GAAW,KACLE,EALV,OAKwBR,QALxB,IAKwBA,OALxB,EAKwBA,EAAOS,gBACXC,YANpB,wBAOcC,EAAW,IAAIC,UACZC,OAAT,QAAyBL,EAAYE,aAR7C,SAS4BI,YAAYH,GATxC,QAUQ,QADMI,EATd,cAUQ,IAAIA,GAAJ,UAAIA,EAAOC,YAAX,aAAI,EAAaA,QACbR,EAAYS,WAAZ,OAAyBF,QAAzB,IAAyBA,GAAzB,UAAyBA,EAAOC,YAAhC,iBAAyB,EAAaA,YAAtC,aAAyB,EAAmBE,IAC5CV,EAAYW,iBAAZ,OAA+BJ,QAA/B,IAA+BA,GAA/B,UAA+BA,EAAOC,YAAtC,iBAA+B,EAAaA,YAA5C,aAA+B,EAAmBI,UAClDZ,EAAYE,YAAc,MAbtC,YAgBQF,EAAYa,WAhBpB,wBAiBcV,EAAW,IAAIC,UACZC,OAAT,QAAyBL,EAAYa,YAlB7C,UAmB4BP,YAAYH,GAnBxC,SAoBQ,QADMI,EAnBd,cAoBQ,IAAIA,GAAJ,UAAIA,EAAOC,YAAX,aAAI,EAAaA,QACbR,EAAYc,UAAZ,OAAwBP,QAAxB,IAAwBA,GAAxB,UAAwBA,EAAOC,YAA/B,iBAAwB,EAAaA,YAArC,aAAwB,EAAmBE,IAC3CV,EAAYe,gBAAZ,OAA8BR,QAA9B,IAA8BA,GAA9B,UAA8BA,EAAOC,YAArC,iBAA8B,EAAaA,YAA3C,aAA8B,EAAmBI,UACjDZ,EAAYa,WAAa,MAvBrC,YA2BQb,EAAYgB,WA3BpB,wBA4Bcb,EAAW,IAAIC,UACZC,OAAT,QAAyBL,EAAYgB,YA7B7C,UA8B4BC,YAAYd,GA9BxC,SA+BQ,QADMe,EA9Bd,cA+BQ,IAAIA,GAAJ,UAAIA,EAAOV,YAAX,aAAI,EAAaA,QACbR,EAAYmB,UAAZ,OAAwBD,QAAxB,IAAwBA,GAAxB,UAAwBA,EAAOV,YAA/B,iBAAwB,EAAaA,YAArC,aAAwB,EAAmBE,IAC3CV,EAAYgB,WAAa,MAjCrC,yBAoCsBI,YAAkBpB,GApCxC,QAoCUqB,EApCV,OAqCIvB,GAAW,IACX,OAAIuB,QAAJ,IAAIA,GAAJ,UAAIA,EAAKb,YAAT,aAAI,EAAWc,UACX9B,EAAMS,eAAiB,GAChB,QAAP,EAAAsB,eAAA,SAASC,IAAI,IAxCrB,6CARiB,sBAuDnB,OAjDAC,qBAAU,cAAU,CAACnC,IAkDjB,eAAC,WAAD,WAEQO,GACA,sBAAK6B,UAAU,UAAf,UACI,qBAAKA,UAAU,qBACf,qBAAKA,UAAU,qBACf,qBAAKA,UAAU,wBAGvB,sBAAKA,UAAU,wBAAf,UACI,cAAC,IAAD,CACIpC,SAAUA,EACVU,YAAW,OAAER,QAAF,IAAEA,OAAF,EAAEA,EAAOS,iBAExB,cAAC,IAAD,CACI0B,mBAvEG,2CAwEHrC,SAAUA","file":"static/js/36.94df2f7e.chunk.js","sourcesContent":["// ** React Imports\r\nimport {useEffect, Fragment, useState} from 'react'\r\n// ** Store & Actions\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport '@styles/base/pages/app-ecommerce-details.scss'\r\nimport CommonFooter from \"../../../components/CommonFooter\"\r\nimport {createSocialStory, uploadImage} from \"../store/action\"\r\nimport Instagram from \"../layout/InstagramDetail\"\r\nimport {uploadVideo} from \"../../product/store/action\"\r\nconst Create = () => {\r\n  // ** Vars\r\n    // ** Store Vars\r\n  const dispatch = useDispatch()\r\n  const store = useSelector(state => state.instagram)\r\n  const [isLoading, setLoading] = useState(false)\r\n  useEffect(() => {}, [dispatch])\r\n\r\n    async function handleSubmitButton() {\r\n        if (isLoading) {\r\n            return\r\n        }\r\n        setLoading(true)\r\n        const socialStory = store?.newSocialStory\r\n        if (socialStory.avatar_file) {\r\n            const formData = new FormData()\r\n            formData.append(`image`, socialStory.avatar_file)\r\n            const image = await uploadImage(formData)\r\n            if (image?.data?.data) {\r\n                socialStory.avatar_url = image?.data?.data?.url\r\n                socialStory.avatar_url_thumb = image?.data?.data?.thumb_url\r\n                socialStory.avatar_file = null\r\n            }\r\n        }\r\n        if (socialStory.image_file) {\r\n            const formData = new FormData()\r\n            formData.append(`image`, socialStory.image_file)\r\n            const image = await uploadImage(formData)\r\n            if (image?.data?.data) {\r\n                socialStory.image_url = image?.data?.data?.url\r\n                socialStory.image_url_thumb = image?.data?.data?.thumb_url\r\n                socialStory.image_file = null\r\n            }\r\n        }\r\n\r\n        if (socialStory.video_file) {\r\n            const formData = new FormData()\r\n            formData.append(`video`, socialStory.video_file)\r\n            const video = await uploadVideo(formData)\r\n            if (video?.data?.data) {\r\n                socialStory.video_url = video?.data?.data?.url\r\n                socialStory.video_file = null\r\n            }\r\n        }\r\n        const res = await createSocialStory(socialStory)\r\n        setLoading(false)\r\n        if (res?.data?.status) {\r\n            store.newSocialStory = {}\r\n            history?.go(-1)\r\n        } else {\r\n            //show error message\r\n        }\r\n    }\r\n\r\n    // ** ComponentDidMount : Get product\r\n  return (\r\n      <Fragment>\r\n          {\r\n              isLoading &&\r\n              <div className='loading'>\r\n                  <div className='effect-1 effects'/>\r\n                  <div className='effect-2 effects'/>\r\n                  <div className='effect-3 effects'/>\r\n              </div>\r\n          }\r\n          <div className='app-ecommerce-details'>\r\n              <Instagram\r\n                  dispatch={dispatch}\r\n                  socialStory={store?.newSocialStory}\r\n              />\r\n              <CommonFooter\r\n                  handleSubmitButton={ handleSubmitButton }\r\n                  dispatch={dispatch}\r\n              />\r\n          </div>\r\n      </Fragment>\r\n  )\r\n}\r\n\r\nexport default Create\r\n"],"sourceRoot":""}